	push	hl
	ld	hl,%1	;const
	pop	de
=
	ex	de,hl
	ld	hl,%1	;const

	pop	bc
	pop	de
	push	de
	push	bc
=
	ld	de,(sp+2)

	ld	hl,0	;const
	add	hl,sp
=
	ld	hl,sp

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	ld	l,(hl)
	ld	h,0
=
	ld	hl,(sp+%1)
	ld	h,0

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	ld	hl,%2
=
	ld	de,(sp+%1)
	ld	hl,%2

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	call	l_gint	;
=
	ld	hl,(sp+%1)

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	ld	a,(hl)
	inc	hl
	ld	h,(hl)
	ld	l,a
=
	ld	hl,(sp+%1)

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	ld	c,(hl)
	inc	hl
	ld	b,(hl)
	ld	hl,%2
=
	ld	bc,(sp+%1)
	ld	hl,%2

	ld	c,l
	ld	b,h
	ld	hl,%2	;const
	add	hl,bc
=
	ld	bc,%2
	add	hl,bc

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	inc	(hl)
	ld	a,(hl)
	inc	hl
	jr	nz,ASMPC+3
	inc	(hl)
	ld	h,(hl)
	ld	l,a
=
	ld	hl,(sp+%1)
	inc	hl
	ld	(sp+%1),hl

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	dec	(hl)
	ld	a,(hl)
	inc	hl
	cp	255
	jr	nz,ASMPC+3
	dec	(hl)
	ld	h,(hl)
	ld	l,a
=
	ld	hl,(sp+%1)
	dec	hl
	ld	(sp+%1),hl

%check 0 <= %1 <= 127
	ld	hl,%1	;const
	add	hl,sp
	ld	de,%2
	ex	de,hl
	call	l_pint
=
	ld	hl,%2
	ld	(sp+%1),hl

%check 0 <= %1 <= 255
	ld	hl,%1	;const
	call	l_gintspsp	;
=
	ld	hl,(sp+%1)
	push	hl

%check 0 <= %1 <= 251
	ld	hl,%1	;const
	add	hl,sp
	call	l_glong
=
	ld	de,(sp+%eval(%1 2 +))
	ld	hl,(sp+%1)

%check 0 <= %1 <= 253
	ld	hl,%1	;const
	add	hl,sp
	call	l_gint
=
	ld	hl,(sp+%1)

	pop	bc
	push	hl
=
	ld	(sp+0),hl

	pop	hl
	push	hl
=
	ld	hl,(sp+0)

	pop	bc
	ld	hl,(sp+0)
	push	bc
=
	ld	hl,(sp+2)


;; Opcode conversion

	ld	(sp+%1),hl
=
	defb	$ed, $a6, %1	;ld (sp+%1),hl

	ld	hl,(sp+%1)
=
	defb	$ed, $ae, %1	;ld hl,(sp+%1)

	ld	(sp+%1),de
=
	defb	$ed, $96, %1	;ld (sp+%1),de

	ld	de,(sp+%1)
=
	defb	$ed, $9e, %1	;ld de,(sp+%1)

	ld	(sp+%1),bc
=
	defb	$ed, $86, %1	;ld (sp+%1),bc

	ld	bc,(sp+%1)
=
	defb	$ed, $8e, %1	;ld bc,(sp+%1)

	ld	hl,sp
=
	defb	$ed, $26	;ld hl,sp


